<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Bar chart project</title>

    <meta
      name="description"
      content="A basic bar chart function using only div."
    />
    <meta name="author" content="Yves Candau" />

    <link rel="stylesheet" href="css/styles.css" />
  </head>

  <body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="js/bar_chart.js"></script>

    <h1>Stretch project 1</h1>
    <h2>Bar chart function using jQuery and CSS grids</h2>
    <ul>
      <li><a href="#simple">Simple bar chart for single values</a></li>
      <li><a href="#stacked">Stacked bar chart for multiple values</a></li>
      <li><a href="#options">Options</a></li>
      <li><a href="#draw">Choosing which components to display</a></li>
      <li>
        <a href="#gaps">Setting the spacing between and around the bars</a>
      </li>
    </ul>
    <hr />

    <h3 id="simple">Simple bar chart for single values</h3>
    <div id="element1D"></div>
    <p class="code">data = [ 5.2, 1.3, 10.9, 4.1 ]</p>
    <hr />

    <h3 id="stacked">Stacked bar chart for multiple values</h3>
    <div id="element2D"></div>
    <p class="code">
      data = [ [ 5, 2, 3, 4 ], [ 3, 4, 1.9, 2.2 ], [ 0, 2, 4 ] ]
    </p>
    <hr />

    <h3 id="options">Options</h3>
    <p>
      Both previous charts use the same options. Switching between single or
      stacked bars is determined by the structure of the data.
    </p>
    <p class="code">
      options = {<br />
      &nbsp;&nbsp;'chart.width': '500px',<br />
      &nbsp;&nbsp;'chart.height': '300px',<br />
      &nbsp;&nbsp;'chart.color': '#ff8',<br />
      &nbsp;&nbsp;'chart.background-color': 'black',<br />
      &nbsp;&nbsp;'chart.font-family': 'Verdana',<br />
      &nbsp;&nbsp;'title.text': 'Fruit production per province',<br />
      &nbsp;&nbsp;'yAxisTitle.text': 'Production (millions kg)',<br />
      &nbsp;&nbsp;'yAxisLabels.precision': 0,<br />
      &nbsp;&nbsp;'legend.text': ['Apples', 'Pears', 'Prunes', 'Berries'],<br />
      &nbsp;&nbsp;'xAxisLabels.text': ['ON', 'QC', 'BC', 'AB'],<br />
      &nbsp;&nbsp;'bars.gaps': ['0.25fr', '0.5fr', '0.25fr'],<br />
      &nbsp;&nbsp;'bars.colors': ['#fb09', '#f809', '#f409', '#f809'],<br />
      &nbsp;&nbsp;'values.position': 'center',<br />
      &nbsp;&nbsp;'values.precision': 1,<br />
      &nbsp;&nbsp;'gridlines.interval': 3<br />
      }<br />
    </p>
    <hr />

    <h3 id="draw">Choosing which components to display</h3>
    <p>
      The various components of the chart can be toggled to be displayed or not.
      The bars adjust their width automatically depending on the available
      horizontal space.
    </p>
    <div id="element3"></div>
    <p class="code">
      options = {<br />
      &nbsp;&nbsp;'yAxisTitle.draw': false,<br />
      &nbsp;&nbsp;'yAxisLabels.draw': false,<br />
      &nbsp;&nbsp;'legend.draw': false,<br />
      }
    </p>
    <hr />

    <h3 id="gaps">Setting the spacing between and around the bars</h3>
    <p>
      The horizontal space between and to the left and right of the bars can be
      set to proportional values (relative to a width of
      <span class="code">1fr</span> for the bars):
    </p>
    <p class="code">'bars.gaps': ['0.5fr', '0.8fr', '0.5fr']<br /></p>

    <p>or fixed values using any standard CSS units:</p>
    <p class="code">'bars.gaps': ['10px', '20px', '10px']<br /></p>
    <p>&nbsp;</p>

    <script>
      const data1D = [5.2, 1.3, 10.9, 4.1]

      const data2D = [
        [5, 2, 3, 4],
        [3, 4, 1.9, 2.2],
        [0, 2, 4],
      ]

      const options1 = {
        'chart.width': '500px',
        'chart.height': '300px',
        'chart.color': '#ff8',
        'chart.background-color': 'black',
        'chart.font-family': 'Verdana',
        'title.text': 'Fruit production per province',
        'yAxisTitle.text': 'Production (millions kg)',
        'yAxisLabels.precision': 0,
        'legend.text': ['Apples', 'Pears', 'Prunes', 'Berries'],
        'xAxisLabels.text': ['ON', 'QC', 'BC', 'AB'],
        'bars.gaps': ['0.25fr', '0.5fr', '0.25fr'],
        'bars.colors': ['#fb09', '#f809', '#f409', '#f809'],
        'values.position': 'center',
        'values.precision': 1,
        'gridlines.interval': 3,
      }

      const draw_to_false = {
        'yAxisTitle.draw': false,
        'yAxisLabels.draw': false,
        'legend.draw': false,
        'bars.gaps': ['0.5fr', '1em', '0.5fr'],
      }
      const options2 = $.extend(true, {}, options1, draw_to_false)

      $(() => {
        drawBarChart(data1D, options1, $('#element1D'))
        drawBarChart(data2D, options1, $('#element2D'))
        drawBarChart(data2D, options2, $('#element3'))
      })
    </script>
  </body>
</html>
